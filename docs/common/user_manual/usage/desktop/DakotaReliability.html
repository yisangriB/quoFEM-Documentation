

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.1.2.3. Reliability Analysis &mdash; Quantified Uncertainty with Optimization for the FEM  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/design-tabs.js"></script>
        <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="3.1.2.4. Deterministic Calibration" href="DakotaDeterministicCalibration.html" />
    <link rel="prev" title="3.1.2.2. Global Sensitivity Analysis" href="DakotaSensitivity.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../index.html">



  
  <img src="../../../../_static/quoFEM-Logo.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/quoFEM/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/desktop/ack.html">2. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/cite.html">4. How To Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/quoCapabilities.html">5. Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/quoReleaseNotes.html">6. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/quoPlans.html">7. Release Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/glossary.html">8. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/abbreviations.html">9. Abbreviations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/desktop/installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/quoFEM/quoFEMtutorial.html">2. Getting Started Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="usage.html">3. User Interface</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="UQ.html">3.1. UQ: Uncertainty Quantification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="UQ.html#uq-features-at-a-glance">3.1.1. UQ Features At-a-Glance</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="UQ.html#dakota-uq-engine">3.1.2. Dakota UQ Engine</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="DakotaSampling.html">3.1.2.1. Forward Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="DakotaSensitivity.html">3.1.2.2. Global Sensitivity Analysis</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.1.2.3. Reliability Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="DakotaDeterministicCalibration.html">3.1.2.4. Deterministic Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="DakotaBayesianCalibration.html">3.1.2.5. Bayesian Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="DakotaGradientFreeOptimization.html">3.1.2.6. Gradient-free Parameter Estimation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="UQ.html#simcenter-uq-engine">3.1.3. SimCenter UQ Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="UQ.html#ucsd-uq-engine">3.1.4. UCSD UQ Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="UQ.html#custom-uq-engine">3.1.5. Custom UQ Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="UQ.html#video-resources">3.1.6. Video Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quoFEM/FEM.html">3.2. FEM: Finite Element Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="RV.html">3.3. RV: Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="quoFEM/QuantitiesOfInterest.html">3.4. QoI: Quantities of Interest</a></li>
<li class="toctree-l2"><a class="reference internal" href="quoFEM/resQUO.html">3.5. RES: Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/desktop/examples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/desktop/troubleshooting.html">5. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reqments/reqQUOFE.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bugs.html">7. Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dcv/quoFEM/quoFEM.html">8. Running in Your Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="quoFEM/usage_video.html">9. Video Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/uqTechnical.html">1. Dakota Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/SimCenterUQTechnical.html">2. Methods in SimCenterUQ Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/UCSDUQTechnical.html">3. Methods in UCSD UQ Engine</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_manual/how_to_extend.html">2. How to Extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_manual/verification/desktop/verification.html">3. Verification</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Quantified Uncertainty with Optimization for the FEM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="usage.html"><span class="section-number">3. </span>User Interface</a> &raquo;</li>
        
          <li><a href="UQ.html"><span class="section-number">3.1. </span>UQ: Uncertainty Quantification</a> &raquo;</li>
        
      <li><span class="section-number">3.1.2.3. </span>Reliability Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/common/user_manual/usage/desktop/DakotaReliability.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reliability-analysis">
<span id="lbldakotareliability"></span><h1><span class="section-number">3.1.2.3. </span>Reliability Analysis<a class="headerlink" href="#reliability-analysis" title="Permalink to this heading">¶</a></h1>
<p>Reliability methods are another class of probabilistic algorithms used for quantifying the effect of uncertainties in simulation input on response metrics of interest. These methods, unlike forward propagation analysis, provide the probability of response exceeding the user-provided threshold levels, i.e. given a set of uncertain input variables, it estimates the probability of system ‘failure’ defined as an excessive response. For reliability analysis, it is often more efficient to concentrate samples around the tail region of the response distributions, i.e. generating more events having low occurrence probability but high consequence, since often the number of samples required by naive sampling approach to resolve a low probability can be prohibitive.</p>
<p>Reliability methods can be split into local and global reliability methods and importance sampling-based methods, as elaborated in the following sections.</p>
<div class="section" id="problem-formulation">
<h2>Problem Formulation<a class="headerlink" href="#problem-formulation" title="Permalink to this heading">¶</a></h2>
<p>The probability of failure <span class="math notranslate nohighlight">\(P_f\)</span> is computed by the following integration:</p>
<blockquote>
<div><div class="math notranslate nohighlight" id="equation-common-user-manual-usage-desktop-dakotareliability-0">
<span class="eqno">(3.1.2.3.1)<a class="headerlink" href="#equation-common-user-manual-usage-desktop-dakotareliability-0" title="Permalink to this equation">¶</a></span>\[P_{f} = Pr \left[g(\mathbf{x}) \leq 0 \right] = \int_{g(\mathbf{x})\leq 0} f_\mathbf{X}(\mathbf{x})d\mathbf{x}\]</div>
</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(f_\mathbf{X}(\mathbf{x})\)</span> is the joint probability distribution of random variables (RVs), and <span class="math notranslate nohighlight">\(g(\mathbf{x})\)</span> is so-called the limit state function that indicates the system performance status: if <span class="math notranslate nohighlight">\(g(\mathbf{x})\leq 0\)</span> is true, then the system is regarded failed. For each quantity of interest (QoI), Dakota uses the following failure limit state function to compute <span class="math notranslate nohighlight">\(P_{f}\)</span>:</p>
<blockquote>
<div><div class="math notranslate nohighlight" id="equation-common-user-manual-usage-desktop-dakotareliability-1">
<span class="eqno">(3.1.2.3.2)<a class="headerlink" href="#equation-common-user-manual-usage-desktop-dakotareliability-1" title="Permalink to this equation">¶</a></span>\[g(\mathbf{x}) = q_{tr} - q(\mathbf{x})\]</div>
</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(q(\mathbf{x})\)</span> is the computed value of QoI for given <span class="math notranslate nohighlight">\(\mathbf{x}\)</span> and <span class="math notranslate nohighlight">\(q_{tr}\)</span> is some response threshold value. So the failure probability here is equivalent to the probability of a response exceeding a certain threshold level. In the quoFEM app, we use the following terminologies:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Probability Level</strong> indicates <span class="math notranslate nohighlight">\(P_{f}\)</span></p></li>
<li><p><strong>Response Level</strong> indicates <span class="math notranslate nohighlight">\(q_{tr}\)</span></p></li>
<li><p><strong>Reliability Analysis</strong> computes <span class="math notranslate nohighlight">\(P_{f}\)</span> corresponding to <span class="math notranslate nohighlight">\(q_{tr}\)</span></p></li>
<li><p><strong>Inverse Reliability Analysis</strong> computes <span class="math notranslate nohighlight">\(q_{tr}\)</span> corresponding to <span class="math notranslate nohighlight">\(P_{f}\)</span></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="local-reliability-methods">
<h2>Local Reliability Methods<a class="headerlink" href="#local-reliability-methods" title="Permalink to this heading">¶</a></h2>
<p>Local reliability methods introduce a first/second-order local approximation of the response or <span class="math notranslate nohighlight">\(g(\mathbf{x})\)</span> around either “Mean Value” or “Design point (also known as the most probable point, MPP)”. Each of these methods involves gradient-based local optimization. The local reliability methods can also be used for “inverse reliability problems” which aim to identify the unknown parameter (random variables) combination that produces prescribed probability levels. The user selects the local method using the pull-down menu.</p>
<p>The default local reliability method is inverse reliability using the first-order reliability approximation (FORM) method. For the FORM method, the user provides the following inputs:</p>
<div class="align-center figure" id="id1">
<span id="figlocalmpp"></span><img alt="../../../../_images/localReliabilityMPP.png" src="../../../../_images/localReliabilityMPP.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.2.3.1 </span><span class="caption-text">Local reliability analysis using the MPP option.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple">
<li><p>The first input involves a selection of the MPP search method from the following options:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">no_approx</span></code>: the MPP search on the original response functions without the use of any approximations. Combining this option with first-order and second-order integration approaches (see next section) results in the traditional first-order and second-order reliability methods (FORM and SORM).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x_taylor_mean</span></code>: a single Taylor series per response/probability level in x-space centered at the uncertain variable means. (Combined with a first-order approach, this is commonly known as the Advanced Mean Value (AMV) method, and combined with the second-order approach the method has been named AMV2:)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u_taylor_mean</span></code>: same as AMV/AMV2, except that the Taylor series is expanded in u-space, termed u-space AMV methods.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x_traylor_mpp</span></code>: an initial Taylor series approximation in x-space at the uncertain variable means, with iterative expansion updates at each MPP estimate until the MPP converges. The first-order option is commonly known as AMV+</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u_taylor_mpp</span></code>: same as AMV+/AMV2+, except that the expansions are performed in u-space.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>The second input involves the user selecting the integration approach for computing probabilities at the MPP. These can be selected to be first-order or second-order integration.</p></li>
<li><p>Finally the user selects either response levels (for forward reliability analysis) or probability level (for inverse reliability analysis) from a drop-down menu. The user then provides these levels in the line edit to the right of the pull-down menu.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only a single quantity of interest (QoI) is allowed to be specified when using the most probable point searching. The Mean Value search method works for multiple QoIs.</p>
</div>
<p>The second local reliability method available is the Mean Value method (also known as MVFOSM). It is the simplest and least-expensive reliability method because it estimates the response means, response standard deviations, and all response probability levels from a single evaluation of the response functions and their gradients at the uncertain variable means. This approximation can have acceptable accuracy when the response functions are nearly linear and their distributions are approximately Gaussian, but <strong>can have poor accuracy in other situations</strong>.</p>
<p>As shown in the figure below the user selects either to use response levels or probability levels. The user then inputs the levels.</p>
<div class="align-center figure" id="id2">
<span id="figlocalmv"></span><img alt="../../../../_images/localReliabilityMVFOSM.png" src="../../../../_images/localReliabilityMVFOSM.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.2.3.2 </span><span class="caption-text">Local reliability analysis using the MVFOSM option.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="global-reliability-methods">
<h2>Global Reliability Methods<a class="headerlink" href="#global-reliability-methods" title="Permalink to this heading">¶</a></h2>
<p>Local reliability methods, while computationally efficient, do not always work. When confronted with a limit state function that is nonsmooth, local gradient-based optimizers may stall due to gradient inaccuracy and fail to converge to an MPP. Moreover, if the limit state is multimodal (multiple MPPs), then a gradient-based local method can, at best, locate only one local MPP solution. Finally, an approximation to the limit state at this MPP may fail to adequately capture the contour of a highly nonlinear limit state. Global reliability methods are designed to handle nonsmooth and multimodal failure surfaces. They do this by creating global approximations of <span class="math notranslate nohighlight">\(g(\mathbf{x})\)</span>, say <span class="math notranslate nohighlight">\(\tilde{g}(\mathbf{x})\)</span>, based on Gaussian process models. They accurately resolve a particular contour of a response function and then estimate probabilities using multimodal adaptive importance sampling.</p>
<p>The user specifies if the Gaussian process is to be created in x-space (original) or u-space (transformed) [Read <a class="reference internal" href="../../../technical_manual/desktop/SimCenterUQTechnical.html#lbluqsimtechnical"><span class="std std-ref">HERE</span></a> for more about the transformation]. The user also specifies the response quantity levels (there is no option to define probability levels) and a seed.</p>
<div class="align-center figure" id="id3">
<span id="figglobalreliability"></span><img alt="../../../../_images/globalReliability.png" src="../../../../_images/globalReliability.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.2.3.3 </span><span class="caption-text">Global reliability analysis.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only a single quantity of interest may be specified when using global reliability</p>
</div>
</div>
<div class="section" id="importance-sampling-is">
<h2>Importance Sampling (IS)<a class="headerlink" href="#importance-sampling-is" title="Permalink to this heading">¶</a></h2>
<p>For problems where one is interested in rare events rather than the whole distribution of output, such as earthquake or storm surge events, conventional sampling methods may require an excessively large number of simulations to obtain an accurate estimation of tail distribution. For such problems, importance sampling (IS) provides a bypass to conventional sampling methods (MCS or LHS), whereby an alternative sampling distribution is introduced around the tail part of the original distribution so that the generated samples have a better resolution at the domain of interest.</p>
<p><a class="reference internal" href="#figis"><span class="std std-numref">Fig. 3.1.2.3.4</span></a> shows the input panel for the IS scheme. Similar to MCS and LHS, IS requires both the number of samples to be executed and the corresponding seed for generating such random samples. In addition, the IS algorithm can be performed via three different approaches, as specified by the third input method:</p>
<ol class="arabic simple">
<li><p><strong>Basic Sampling</strong>: A sampling density is constructed in the failure region based on an initial LHS sampling, followed by the generation of importance samples and weights and evaluation of the Cumulative Distribution Function.</p></li>
<li><p><strong>Adaptive Sampling</strong>: The basic sampling procedure is repeated iteratively until a convergence in failure probability is achieved.</p></li>
<li><p><strong>Multimodal Adaptive Sampling</strong>: A multimodal sampling density is constructed based on samples in the failure and the adaptive sampling procedure is used.</p></li>
</ol>
<div class="align-center figure" id="id4">
<span id="figis"></span><img alt="../../../../_images/fwIS.png" src="../../../../_images/fwIS.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.2.3.4 </span><span class="caption-text">Importance Sampling input panel.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only a single quantity of interest may be specified when using importance sampling</p>
</div>
<p>For more information on each, please refer to the Dakota manual.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2024, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158130480-4', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>