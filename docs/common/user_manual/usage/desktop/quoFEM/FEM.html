

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.2. FEM: Finite Element Method &mdash; Quantified Uncertainty with Optimization for the FEM  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/design-tabs.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="3.3. RV: Random Variables" href="../RV.html" />
    <link rel="prev" title="3.1.5.1. Configuring CustomUQ Engine" href="../Configuring_CustomUQ.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../../index.html">



  
  <img src="../../../../../_static/quoFEM-Logo.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/desktop/ack.html">2. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/cite.html">4. How To Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoCapabilities.html">5. Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoReleaseNotes.html">6. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoPlans.html">7. Release Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/glossary.html">8. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/abbreviations.html">9. Abbreviations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/desktop/installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/quoFEMtutorial.html">2. Getting Started Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usage.html">3. User Interface</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../UQ.html">3.1. UQ: Uncertainty Quantification</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.2. FEM: Finite Element Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.2.1. OpenSees</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">3.2.2. Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.2.3. FEAPpv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom">3.2.4. Custom</a></li>
<li class="toctree-l3"><a class="reference internal" href="#surrogategp">3.2.5. SurrogateGP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-model">3.2.6. Multi Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#video-resources">3.2.6.1. Video Resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../RV.html">3.3. RV: Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuantitiesOfInterest.html">3.4. QoI: Quantities of Interest</a></li>
<li class="toctree-l2"><a class="reference internal" href="resQUO.html">3.5. RES: Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/desktop/examples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/desktop/troubleshooting.html">5. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reqments/reqQUOFE.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bugs.html">7. Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dcv/quoFEM/quoFEM.html">8. Running in Your Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_video.html">9. Video Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../technical_manual/desktop/technical_manual.html">1. Technical Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/architecture/desktop/architecture.html">2. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_extend/desktop/how_to_extend.html">3. How to Extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/verification/desktop/verification.html">4. Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/coding_style/desktop/coding_style.html">5. Coding Style</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Quantified Uncertainty with Optimization for the FEM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../usage.html"><span class="section-number">3. </span>User Interface</a> &raquo;</li>
        
      <li><span class="section-number">3.2. </span>FEM: Finite Element Method</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/common/user_manual/usage/desktop/quoFEM/FEM.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fem-finite-element-method">
<span id="lblfem"></span><h1><span class="section-number">3.2. </span>FEM: Finite Element Method<a class="headerlink" href="#fem-finite-element-method" title="Permalink to this heading">¶</a></h1>
<p>The <strong>FEM</strong> tab will present users with a selection of FEM applications. Currently, there are six options:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>OpenSees</p></li>
<li><p>Python</p></li>
<li><p>FEAPpv</p></li>
<li><p>SurrogateGP (using a surrogate model trained in quoFEM in place of a numerical simulation model)</p></li>
<li><p>Custom (user-specified application)</p></li>
<li><p>Multi Model (using more than one model in an analysis), along with the option of specifying no simulation model.</p></li>
</ol>
<p>The user must select one of these applications to proceed with the analysis. The user must also provide the necessary input files for the selected application. The input files required for each application are described in the following sections.</p>
</div></blockquote>
<div class="align-center figure" id="id3">
<span id="figfem"></span><a class="reference internal image-reference" href="../../../../../_images/FEM4.png"><img alt="../../../../../_images/FEM4.png" src="../../../../../_images/FEM4.png" style="width: 1200px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.1 </span><span class="caption-text">Input for the <strong>FEM</strong> tab.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the UQ engines treat the FEM applications as a black box, when the UQ engine runs each deterministic simulation it expects the FEM application to output a single file. This file must be named <code class="docutils literal notranslate"><span class="pre">results.out</span></code> and be placed in the same directory as the main input file. The <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file must contain a single line. That line must contain as many QoI values as the sum of the length of all the EDPs defined by the user in the <strong>QoI</strong> panel. Each value must be separated by a space. An example <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file for a problem specifying four response QoI values is as shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">63.8314</span> <span class="mf">43.312</span> <span class="mf">0.846004</span> <span class="mf">0.00587503</span> 
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h2><span class="section-number">3.2.1. </span>OpenSees<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>When the choice of FEM application is OpenSees (the default application), the user is presented with the input panel shown in the figure above and there are two entry fields for filenames:</p>
<ol class="arabic simple">
<li><p><strong>Input Script</strong>: The user must specify a main input script. When entered the application will parse this file looking for variables set with the <code class="docutils literal notranslate"><span class="pre">pset</span></code> option (a unique set command to the OpenSees interpreter that is used to identify parameter values). For each variable whose value is set with <code class="docutils literal notranslate"><span class="pre">pset</span></code>, the program will auto-populate the variable in the <strong>RV</strong> tab.</p></li>
</ol>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c"># units kN &amp; mm</span>

<span class="c">#</span>
<span class="c"># set some parameters</span>
<span class="c">#</span>

<span class="nv">pset</span><span class="w"> </span>E<span class="w"> </span><span class="mi">205</span>
<span class="nv">pset</span><span class="w"> </span>P<span class="w"> </span><span class="mi">25</span>
<span class="nv">pset</span><span class="w"> </span>Au<span class="w"> </span><span class="mi">500</span>
<span class="nv">pset</span><span class="w"> </span>Ao<span class="w"> </span><span class="mi">250</span>

<span class="c">#</span>
<span class="c"># build the model</span>
<span class="c">#</span>

<span class="nv">model</span><span class="w"> </span>Basic<span class="w"> </span><span class="o">-</span>ndm<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span>ndf<span class="w"> </span><span class="mi">2</span>

<span class="nv">node</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="mi">0</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="mi">4000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">8000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">12000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="mi">4000</span><span class="w"> </span><span class="mi">4000</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="mi">8000</span><span class="w"> </span><span class="mi">4000</span>

<span class="nv">fix</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">fix</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span>

<span class="nv">uniaxialMaterial</span><span class="w"> </span>Elastic<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">$E</span>

<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">timeSeries</span><span class="w"> </span>Linear<span class="w"> </span><span class="mi">1</span>
<span class="nv">pattern</span><span class="w"> </span>Plain<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nb">load</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="o">-</span><span class="nv">$P</span><span class="k">]</span>
<span class="w">    </span><span class="nb">load</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="o">-</span><span class="nv">$P</span><span class="k">]</span>
<span class="k">}</span>

<span class="c">#</span>
<span class="c"># create a recorder</span>
<span class="c">#</span>

<span class="nv">recorder</span><span class="w"> </span>Node<span class="w"> </span><span class="o">-</span>file<span class="w"> </span>node.out<span class="w"> </span><span class="o">-</span>scientific<span class="w"> </span><span class="o">-</span>precision<span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">-</span>node<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">-</span>dof<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span>disp

<span class="c">#</span>
<span class="c"># build and perform the analysis</span>
<span class="c">#</span>

<span class="nv">algorithm</span><span class="w"> </span>Linear
<span class="nv">integrator</span><span class="w"> </span>LoadControl<span class="w"> </span><span class="mf">1.0</span>
<span class="nv">system</span><span class="w"> </span>ProfileSPD
<span class="nv">numberer</span><span class="w"> </span>RCM
<span class="nv">constraints</span><span class="w"> </span>Plain
<span class="nv">analysis</span><span class="w"> </span>Static
<span class="nv">analyze</span><span class="w"> </span><span class="mi">1</span>

<span class="c">#</span>
<span class="c"># remove the recorders</span>
<span class="c">#</span>

<span class="nv">remove</span><span class="w"> </span>recorders
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Postprocess Script</strong> (optional): This is an optional entry where the user has the option of specifying either a tcl script or a Python script that will be used to post-process the results and create a <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file after the main script runs. See for instance, <a class="reference internal" href="../../../examples/desktop/qfem-0001/README.html#qfem-0001"><span class="std std-ref">example 1</span></a>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The postprocess file can be either a tcl script or a Python script and the file extensions must be either <code class="docutils literal notranslate"><span class="pre">.py</span></code> or <code class="docutils literal notranslate"><span class="pre">.tcl</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If a tcl script file is used and the user is reading results from files created with OpenSees recorder commands, the user must ensure there is a <code class="docutils literal notranslate"><span class="pre">wipe</span> <span class="pre">recorders</span></code> command at either the end of the main script or the start of the postprocessing script.</p>
</div>
</div>
<div class="section" id="python">
<h2><span class="section-number">3.2.2. </span>Python<a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h2>
<p>The user provides a main script and has the option to provide 2 other scripts:</p>
<div class="align-center figure">
<a class="reference internal image-reference" href="../../../../../_images/openseespyFEM.png"><img alt="../../../../../_images/openseespyFEM.png" src="../../../../../_images/openseespyFEM.png" style="width: 1200px;" /></a>
</div>
<ol class="arabic simple">
<li><p><strong>Postprocess Script</strong> (Optional): This must be a Python script which is provided the QoI variable names when started. This entry can be left blank if the main script creates a <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file with a single line as described for the OpenSees application.</p></li>
<li><p><strong>Parameters File</strong>: This file allows for the automatic population of the <strong>RV</strong> tab with any variables found in the file. For example, if the file contained the following:</p></li>
</ol>
<blockquote>
<div><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># set some parameters</span>

<span class="n">E</span> <span class="o">=</span> <span class="mi">205</span>
<span class="n">P</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">Ao</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">Au</span> <span class="o">=</span> <span class="mi">500</span>
</pre></div>
</div>
<p>The <strong>RV</strong> tab would be populated with the <code class="docutils literal notranslate"><span class="pre">E</span></code>, <code class="docutils literal notranslate"><span class="pre">P</span></code>, <code class="docutils literal notranslate"><span class="pre">Ao</span></code>, and <code class="docutils literal notranslate"><span class="pre">Au</span></code> random variables. See <a class="reference internal" href="../../../examples/desktop/qfem-0002/README.html#qfem-0002"><span class="std std-ref">example 2</span></a> for more. For users on Windows systems, see the important warning below:</p>
</div></blockquote>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><strong>Python on Windows.</strong> On Windows, quoFEM is bundled with its own <code class="docutils literal notranslate"><span class="pre">python.exe</span></code>, with the essential packages (including numpy, scipy, openseespy) already installed. By default, this <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> is used to (1) run SimCenter workflow; and (2) run the user-provided python model. Therefore, please make sure to test your model using the “correct” <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> before running in quoFEM.</p>
<div class="align-center figure" id="id4">
<a class="reference internal image-reference" href="../../../../../_images/step1_preference_default1.svg"><img alt="../../../../../_images/step1_preference_default1.svg" src="../../../../../_images/step1_preference_default1.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.2.1 </span><span class="caption-text">Windows Default Python Path found in <code class="docutils literal notranslate"><span class="pre">File</span></code>-<code class="docutils literal notranslate"><span class="pre">Preference</span></code></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<ul>
<li><p><strong>“Pip install” Python packages</strong></p>
<p>If your model requires additional Python packages, use the following command to install them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="nv">$PythonExePath</span><span class="o">}</span><span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="o">{</span><span class="nv">$PackageName</span><span class="o">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">{$PythonExePath}</span></code> is the (default) python path shown in the preference window and <code class="docutils literal notranslate"><span class="pre">{$PackageName}</span></code> is the name of the python package.</p>
</li>
<li><p><strong>Use custom Python</strong></p>
<div class="align-center figure" id="id5">
<a class="reference internal image-reference" href="../../../../../_images/step1_preference_custom.svg"><img alt="../../../../../_images/step1_preference_custom.svg" src="../../../../../_images/step1_preference_custom.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.2.2 </span><span class="caption-text">Custom Python Path</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>If you would like to use another version of Python in quoFEM, use the custom option in <code class="docutils literal notranslate"><span class="pre">File</span></code>-<code class="docutils literal notranslate"><span class="pre">Preference</span></code>, then you will need to <strong>manually install</strong> the packages required to run the SimCenter workflow using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="nv">$NewPythonExePath</span><span class="o">}</span><span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>nheri_simcenter<span class="w"> </span>--upgrade
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">{$NewPythonExePath}</span></code> is the new python path specified in the preference window.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2><span class="section-number">3.2.3. </span>FEAPpv<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p><strong>FEAPpv</strong> is another FEM engine used by the quoFEM app that is publicly available from the <a class="reference external" href="http://projects.ce.berkeley.edu/feap/feappv/">FEAPpv</a> page. FEAPpv is a general-purpose finite element analysis program that is designed for research and educational use. To install <strong>FEAPpv</strong> you must download the source code and follow the build instructions on the <strong>Source Code Download and Compile Instructions</strong> section of the <a class="reference external" href="http://projects.ce.berkeley.edu/feap/feappv/">FEAPpv</a> page.</p>
<p>Similar to the OpenSees application, when the user selects FEAPpv the user is requested to provide two files.</p>
<div class="align-center figure">
<a class="reference internal image-reference" href="../../../../../_images/feapFEM.png"><img alt="../../../../../_images/feapFEM.png" src="../../../../../_images/feapFEM.png" style="width: 1200px;" /></a>
</div>
<ol class="arabic simple">
<li><p><strong>Input File</strong>: The user must specify a main input file.  A part of this file may contain variables set in the <code class="docutils literal notranslate"><span class="pre">PARA</span></code> section. The variables in this section will be read by the UI when the file is entered and will be autopopulated in the <strong>RV</strong> tab. For example, if a file containing the following code was specified:</p></li>
</ol>
<ol class="arabic simple" start="2">
<li><p><strong>Postprocess Script</strong>: The user must provide the name of the Python script that will run when FEAPpv has finished executing. This Python script must load the output file from FEAPpv and create the <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file. Currently, the user has no control over the name of the output file created by FEAPpv, <code class="docutils literal notranslate"><span class="pre">SimCenterOut.txt</span></code>. It is this file the post-process script must open and use, to create the <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file.</p></li>
</ol>
</div>
<div class="section" id="custom">
<h2><span class="section-number">3.2.4. </span>Custom<a class="headerlink" href="#custom" title="Permalink to this heading">¶</a></h2>
<p>This option allows users to specify custom simulation applications which do not
necessarily need to be limited to only Finite Element Method software. With this
option all users need to do is provide a driver script that takes the input file
generated by the UQ engine, parses and passes the inputs to the custom analysis
engine, and processes the results to meet the format requirements specified for
<code class="docutils literal notranslate"><span class="pre">results.out</span></code>. The inputs generated by the UQ engine will be provided in a
file named <code class="docutils literal notranslate"><span class="pre">params.in</span></code> and will always follow the format shown in the example
<code class="docutils literal notranslate"><span class="pre">params.in</span></code> file <a class="reference internal" href="#paramsinexample"><span class="std std-ref">below</span></a>. The first line specifies the
number of random variables while the subsequent lines first contain the name of
the random variable and the value of the current realization separated by a
space.</p>
<div class="highlight-default notranslate" id="paramsinexample"><div class="highlight"><pre><span></span><span class="mi">2</span>
<span class="n">randomVariable</span> <span class="mf">2.719191180014362e+02</span>
<span class="n">anotherRandomVariable</span> <span class="mf">7.518852020241320e+01</span>
</pre></div>
</div>
<p>For the custom simulation application, the user provides at least two inputs:</p>
<ul class="simple">
<li><p>The script that drives the simulations, which must be named
<code class="docutils literal notranslate"><span class="pre">driver.bat</span></code> on Windows and <code class="docutils literal notranslate"><span class="pre">driver</span></code> on MacOS and Linux</p></li>
<li><p>The script that post-processes the simulation results and writes them to
<code class="docutils literal notranslate"><span class="pre">results.out</span></code> in the required format</p></li>
</ul>
<p>Additionally, users can specify as many additional files and binaries as
required by the application by increasing the number of input slots, as shown in
<a class="reference internal" href="#customfem"><span class="std std-numref">Fig. 3.2.4.1</span></a>. By specifying these files here, they will be copied to the
correct location for quoFEM to access them during analyses. Users also have the
option to simply place all the required files in the same location as the
provided workflow driver script – quoFEM will automatically copy any files in this
directory. This is particularly helpful if several applications with
numerous inputs are all being called by the workflow driver script and avoids
the need to explicitly input each one of these files.</p>
<div class="align-center figure" id="id6">
<span id="customfem"></span><a class="reference internal image-reference" href="../../../../../_images/customFEM.png"><img alt="../../../../../_images/customFEM.png" src="../../../../../_images/customFEM.png" style="width: 1200px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.4.1 </span><span class="caption-text">Input for Custom Analysis Application</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="surrogategp">
<h2><span class="section-number">3.2.5. </span>SurrogateGP<a class="headerlink" href="#surrogategp" title="Permalink to this heading">¶</a></h2>
<p>In place of the physical simulation models, the Gaussian process surrogate model trained in quoFEM can be imported for UQ/Optimization analyses.</p>
<div class="align-center figure" id="id7">
<span id="surrogatefem1"></span><a class="reference internal image-reference" href="../../../../../_images/SurrogateFEM1.png"><img alt="../../../../../_images/SurrogateFEM1.png" src="../../../../../_images/SurrogateFEM1.png" style="width: 1200px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.5.1 </span><span class="caption-text">Input for Surrogate model FEM Application</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>When users select the SurrogateGP option, they are requested to provide <strong>Surrogate info file (.json)</strong> that contains the information about the surrogate model. Users can open it with a text editor to see the contents. Once the file is loaded, users may choose the tolerance level of the predictive variance.</p>
<ul class="simple">
<li><p><strong>Maximum Allowable Normalized Variance</strong>: Prediction variance divided by the variance level of the training dataset. If more than one QoI is introduced, only the highest normalized variance value will be considered.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>It is important to understand that the predictive variance does not necessarily imply the error level of the model.</p></li>
<li><p>The provided percentage ratio of the out-of-tolerance samples is only a rough guideline since it assumes that the samples are uniformly populated throughout the range the user provided during the training session. Therefore, if the user selects other distribution types and ranges, the percentage estimation will not be correct anymore.</p></li>
</ul>
</div>
<p>Users may either stop the analysis, continue, or run exact FEM simulations whenever the tolerance limit is exceeded.</p>
<ul class="simple">
<li><p><strong>Stop Analysis</strong>: The analysis is immediately terminated. quoFEM will show the error (e.g. dakota engine gives “No dakotaTab.out file” error)</p></li>
<li><p><strong>Continue</strong>: The tolerance level is ignored, and the analysis is continued. This option is not recommended.</p></li>
<li><p><strong>Run Exact FEM Simulation</strong>: The program will run the exact FEM simulation user provided in the training session. In case the surrogate model is constructed purely based on the data and without any model information (case 3 in section 2.1.2.2), this option will be disabled. To allow this option, an additional folder that contains the simulation information is required. This folder, called <strong>Simulation template folder (templatedir_SIM)</strong>, contains the simulator scripts (workflow driver) and required files to run the original simulation model. This file can be obtained by</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>surrogate model file (.json)</strong> and <strong>Simulation template folder (templatedir_SIM)</strong> can be generated from the quoFEM. See <a class="reference internal" href="../SimCenterUQSurrogate.html#lblsimsurrogate"><span class="std std-ref">Gaussian Process (GP) Surrogate Modeling</span></a>.</p>
</div>
<p>Additionally, <strong>GP output</strong> can be set as either the <em>median prediction</em> or a <em>random sample</em> generated from the normal distribution (or lognormal distribution if the user used log-transform when training) with the predictive median and variance. <strong>NOTE:</strong> that the random generator does not account for the Gaussian process correlation, and each realization of QoI given RVs is independent of each other. Only users familiar with GP modeling and who understand the limitations are recommended to use the <em>random sample</em> option.</p>
<p>If the user wants to inspect the simulation status or check error/warning messages related to the surrogate model, they can refer to the messages written at: <code class="docutils literal notranslate"><span class="pre">{Local</span> <span class="pre">Jobs</span> <span class="pre">Directory}/tmp.SimCenter/surrogateLog.err</span></code>. (Note: <code class="docutils literal notranslate"><span class="pre">{Local</span> <span class="pre">Jobs</span> <span class="pre">Directory}</span></code> is specified from the ‘File’ → ‘Preferences’ in the menu bar.)</p>
<div class="align-center figure" id="id8">
<span id="surrogatefem2"></span><a class="reference internal image-reference" href="../../../../../_images/SurrogateFEM2.png"><img alt="../../../../../_images/SurrogateFEM2.png" src="../../../../../_images/SurrogateFEM2.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.5.2 </span><span class="caption-text">Example of surrogateLog.err file</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once the surrogate model is imported, the RV and QoI tab will be auto-populated. Users are allowed to remove some QoIs if not interested but may not add new QoIs or modify the names of existing QoIs.</p>
</div>
</div>
<div class="section" id="multi-model">
<h2><span class="section-number">3.2.6. </span>Multi Model<a class="headerlink" href="#multi-model" title="Permalink to this heading">¶</a></h2>
<p>By selecting this option, users can define multiple numerical simulation models for use in their UQ analysis. The Add and Remove buttons allow users to control the number of models they want to use in the analysis.</p>
<div class="align-center figure" id="id9">
<a class="reference internal image-reference" href="../../../../../_images/multiModel1.png"><img alt="../../../../../_images/multiModel1.png" src="../../../../../_images/multiModel1.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.6.1 </span><span class="caption-text">Input for Multi Model FEM Application</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>By adding a model, a new tab is created in the FEM panel where users can choose one of the FEM applications described in the sections above and provide the inputs necessary to define the model. Users also need to specify their belief about the credibility of the model in the tab corresponding to that model. The beliefs are expressed as non-negative numerical values. The belief value for each model is defined relative to the other models, and the beliefs do not need to sum to 1.</p>
<div class="align-center figure" id="id10">
<a class="reference internal image-reference" href="../../../../../_images/multiModel2.png"><img alt="../../../../../_images/multiModel2.png" src="../../../../../_images/multiModel2.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2.6.2 </span><span class="caption-text">Selecting a FEM application within a model tab</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a <strong>Multi Model</strong> application is selected, at least 2 models must be defined.</p>
</div>
<div class="section" id="video-resources">
<h3><span class="section-number">3.2.6.1. </span>Video Resources<a class="headerlink" href="#video-resources" title="Permalink to this heading">¶</a></h3>
<p>Recorded in tool training, 2022.</p>
<div style="text-align: center;">
   <video controls src="../../../../../_static/videos/quoFEM/youtube_FEM_Day1_TestClip.mp4" width="560" height="315"> </video>
</div></div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2024, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158130480-4', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>