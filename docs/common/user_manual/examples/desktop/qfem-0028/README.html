

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>4.15. Bayesian calibration of hierarchical models &mdash; Quantified Uncertainty with Optimization for the FEM  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/design-tabs.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="5. Troubleshooting" href="../../../troubleshooting/desktop/troubleshooting.html" />
    <link rel="prev" title="4.14. Forward propagation of uncertainty with multiple simulation models" href="../qfem-0027/README.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../../index.html">



  
  <img src="../../../../../_static/quoFEM-Logo.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/desktop/ack.html">2. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/cite.html">4. How To Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoCapabilities.html">5. Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoReleaseNotes.html">6. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoPlans.html">7. Release Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/glossary.html">8. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/abbreviations.html">9. Abbreviations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/desktop/installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/quoFEMtutorial.html">2. Getting Started Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/desktop/usage.html">3. User Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">4. Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../qfem-0001/README.html">4.1. Two-Dimensional Truss: Sampling, Reliability and Sensitivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0002/README.html">4.2. Forward Propagation - OpenSeesPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0005/README.html">4.3. Basic modeling with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0007/README.html">4.4. Steel Frame: Conventional Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0009/README.html">4.5. Two-Dimensional Truss: Global Sensitivity Analysis using SimCenterUQ Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0014/README.html">4.6. Steel Frame: Bayesian Calibration using TMCMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0015/README.html">4.7. Surrogate Modeling for One Story Building Earthquake Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0016/README.html">4.8. Surrogate Modeling to Predict Mean and Variance of Earthquake Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0017/README.html">4.9. Custom UQ for UQpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0019/README.html">4.10. Bayesian Calibration of Material Model Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0022/README.html">4.11. Two-Dimensional Truss: PLoM Modeling and Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0023/README.html">4.12. Global Sensitivity Analysis for Field QoI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0025/README.html">4.13. Heteroscedastic Gaussian Process modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0027/README.html">4.14. Forward propagation of uncertainty with multiple simulation models</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.15. Bayesian calibration of hierarchical models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#outline">4.15.1. Outline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data">4.15.2. Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model">4.15.3. Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchical-bayesian-inference">4.15.4. Hierarchical Bayesian Inference</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-required">4.15.5. Files required</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uq-workflow">4.15.6. UQ workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-for-restarting-the-analysis">4.15.7. Files for restarting the analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/desktop/troubleshooting.html">5. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reqments/reqQUOFE.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bugs.html">7. Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dcv/quoFEM/quoFEM.html">8. Running in Your Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/desktop/quoFEM/usage_video.html">9. Video Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../technical_manual/desktop/uqTechnical.html">1. Dakota Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../technical_manual/desktop/SimCenterUQTechnical.html">2. Methods in SimCenterUQ Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../technical_manual/desktop/UCSDUQTechnical.html">3. Methods in UCSD UQ Engine</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/architecture/desktop/architecture.html">2. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_extend/desktop/how_to_extend.html">3. How to Extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/verification/desktop/verification.html">4. Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/coding_style/desktop/coding_style.html">5. Coding Style</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Quantified Uncertainty with Optimization for the FEM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../examples.html"><span class="section-number">4. </span>Examples</a> &raquo;</li>
        
      <li><span class="section-number">4.15. </span>Bayesian calibration of hierarchical models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/common/user_manual/examples/desktop/qfem-0028/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bayesian-calibration-of-hierarchical-models">
<span id="qfem-0028"></span><h1><span class="section-number">4.15. </span>Bayesian calibration of hierarchical models<a class="headerlink" href="#bayesian-calibration-of-hierarchical-models" title="Permalink to this heading">¶</a></h1>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Problem files</p></td>
<td><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples/qfem-0028/">Github</a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="outline">
<h2><span class="section-number">4.15.1. </span>Outline<a class="headerlink" href="#outline" title="Permalink to this heading">¶</a></h2>
<p>In this example, the focus is on employing the UCSD_UQ engine to calibrate a hierarchical model. This model is designed to capture the inherent variability, known as aleatory uncertainty, in the parameters of a numerical model, in this case, the Steel02 material model in OpenSees. The calibration process involves fitting the Steel02 model to each of several datasets containing cyclic stress-strain data from multiple experiments on coupons of Grade 60 steel, and simultaneously estimating the parameters of the distribution of the estimated parameters of the Steel02 model.</p>
</div>
<div class="section" id="data">
<h2><span class="section-number">4.15.2. </span>Data<a class="headerlink" href="#data" title="Permalink to this heading">¶</a></h2>
<p>The dataset used for the inference presented in this example originates from experimental tests conducted on reinforcing steel specimens, commonly referred to as coupons, at the University of California, San Diego, in 2013. Refer Carreño et al. <a class="reference internal" href="#carreno2020" id="id1"><span>[Carreño2020]</span></a> for details.</p>
<p>This dataset comprises cyclic stress-strain tests performed on thirty-six coupons. These coupons were sourced from three distinct steel manufacturing mills and adhered to two different manufacturing standards of Grade 60 steel. Specifically, each mill provided two straight #4 bars, each measuring 4.6 meters in length. One bar from each mill complied with Grade 60 A615 manufacturing standards, while the other adhered to Grade 60 A706 standards. From each bar, six coupons were extracted, and each coupon underwent cyclic strain tests with varying input strain histories.</p>
<p>Consequently, a total of 36 coupons were tested, derived from the combination of 3 mills, 2 bars per mill, and 6 coupons per bar. To ensure uniformity in specimen cross-sections, each coupon underwent machining, as illustrated in <a class="reference internal" href="#figcoupon"><span class="std std-numref">Fig. 4.15.2.1</span></a>. Machining was employed to maintain a length-to-diameter ratio of 2 in the machined portion of the bars, thereby minimizing the effects of nonlinear geometry, such as partial buckling, in the stress-strain response.</p>
<div class="align-center figure" id="id2">
<span id="figcoupon"></span><img alt="../../../../../_images/Coupon.png" src="../../../../../_images/Coupon.png" />
<p class="caption"><span class="caption-number">Fig. 4.15.2.1 </span><span class="caption-text">Test coupon</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The experiments involved six distinct random cyclic strain histories, as depicted in <a class="reference internal" href="#figstrainhistories"><span class="std std-numref">Fig. 4.15.2.2</span></a>. These strain histories include strain reversals of various amplitudes, along with overall drifts towards positive or negative strains. Notably, the amplitude of these drifts was constrained within <span class="math notranslate nohighlight">\(\pm 5\%\)</span>, a limit representative of the strain range typically experienced by reinforcing bars during seismic events.</p>
<div class="align-center figure" id="id3">
<span id="figstrainhistories"></span><img alt="../../../../../_images/StrainHistories.png" src="../../../../../_images/StrainHistories.png" />
<p class="caption"><span class="caption-number">Fig. 4.15.2.2 </span><span class="caption-text">Strain histories</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="model">
<h2><span class="section-number">4.15.3. </span>Model<a class="headerlink" href="#model" title="Permalink to this heading">¶</a></h2>
<p>The Giuffré-Menegotto-Pinto (GMP) material model is a widely adopted uniaxial material model applicable to both reinforcing and structural steel. It is based on the original formulation of Menegotto and Pinto, later extended by Filippou et al. to incorporate isotropic strain hardening and implemented in OpenSees as the Steel02 material model. This model predicts the evolution of stress as a function of an input strain history.</p>
<p>This model is characterized by ten parameters:
- Young’s modulus <span class="math notranslate nohighlight">\(E_0\)</span> for plastic behavior,
- Parameters <span class="math notranslate nohighlight">\((R_0, cR_1, cR_2)\)</span> governing the Bauschinger effect,
- Parameters <span class="math notranslate nohighlight">\((a_1, a_2, a_3, a_4)\)</span> for isotropic hardening.</p>
<p>Out of these 10 parameters, in this example, the value of <span class="math notranslate nohighlight">\(R_0\)</span> is set to 20, the value most commonly recommended for this parameter, and the value of <span class="math notranslate nohighlight">\(a_2\)</span> and <span class="math notranslate nohighlight">\(a_4\)</span> are set to 1. Thus, the 7 parameters of the Steel02 material model that are inferred in this example are: <span class="math notranslate nohighlight">\(\theta = \{f_y, E, b, cR_1, cR_2, a_1, a_3\}\)</span>.</p>
</div>
<div class="section" id="hierarchical-bayesian-inference">
<h2><span class="section-number">4.15.4. </span>Hierarchical Bayesian Inference<a class="headerlink" href="#hierarchical-bayesian-inference" title="Permalink to this heading">¶</a></h2>
<p>Based on the provided dataset and the described material model, the inference process aims to estimate the material model parameters <span class="math notranslate nohighlight">\(\theta_i\)</span> for each dataset, the variance of the prediction error <span class="math notranslate nohighlight">\(\sigma_i^2\)</span> for each dataset, as well as the mean <span class="math notranslate nohighlight">\(\mu_{\theta}\)</span> and covariance <span class="math notranslate nohighlight">\(\Sigma_{\theta}\)</span> of the distribution of the material model parameter estimates.</p>
<p>The hierarchical model utilized for this inference process is outlined in the <a class="reference internal" href="../../../../technical_manual/desktop/UCSDUQTechnical.html#lbluqucsd-hierarchical"><span class="std std-ref">Technical Manual</span></a>. This model is designed to handle uncertainties in the parameter estimates effectively. The inputs required from the user in quoFEM are kept to a minimum, simplifying the inference process.</p>
<p>For more detailed information on the hierarchical model and the inference procedure, please refer to the <a class="reference internal" href="../../../../technical_manual/desktop/UCSDUQTechnical.html#lbluqucsd-hierarchical"><span class="std std-ref">Technical Manual</span></a>.</p>
</div>
<div class="section" id="files-required">
<h2><span class="section-number">4.15.5. </span>Files required<a class="headerlink" href="#files-required" title="Permalink to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do NOT place the files in your root, downloads, or desktop folder as when the application runs it will copy the contents on the directories and subdirectories containing these files multiple times. If you are like us, your root, Downloads or Documents folders contain a lot of files.</p>
</div>
<p>As depicted in Figure <a class="reference internal" href="#figdataandmodel"><span class="std std-numref">Fig. 4.15.5.1</span></a>, the required files for executing this example are organized in two distinct directories.</p>
<p>The first directory contains the model scripts, which remain consistent across various experiments. The second directory contains the data files. These data files vary from one experiment to another and are further organized into subdirectories corresponding to each experiment, as elaborated below.</p>
<div class="align-center figure" id="id4">
<span id="figdataandmodel"></span><a class="reference internal image-reference" href="../../../../../_images/ModelAndData.png"><img alt="../../../../../_images/ModelAndData.png" src="../../../../../_images/ModelAndData.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.5.1 </span><span class="caption-text">Model files directory and data files directory</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple">
<li><p>In this example, a total of 36 datasets comprising cyclic stress-strain measurements are utilized. Each dataset consists of two files. These datasets are organized within subdirectories under the directory named <a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0028/src/CouponCyclicTestData_every_20th_point">CouponCyclicTestData_every_20th_point</a>.</p></li>
</ol>
<p>When using the hierarchical Bayesian calibration approach, each dataset must be placed in its own dedicated subdirectory. The layout of the data files used in this example is illustrated in Figures <a class="reference internal" href="#figdatadirectory"><span class="std std-numref">Fig. 4.15.5.2</span></a> and <a class="reference internal" href="#figdatasetsubdirectories"><span class="std std-numref">Fig. 4.15.5.3</span></a>.</p>
<p>Within each experiment’s subdirectory, the strain values measured are stored in files named <code class="docutils literal notranslate"><span class="pre">input_data.txt</span></code>, while the corresponding stress measurements are found in files named <code class="docutils literal notranslate"><span class="pre">output_data.txt</span></code>.</p>
<div class="align-center figure" id="id5">
<span id="figdatadirectory"></span><a class="reference internal image-reference" href="../../../../../_images/DataDirectory.png"><img alt="../../../../../_images/DataDirectory.png" src="../../../../../_images/DataDirectory.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.5.2 </span><span class="caption-text">Directory with calibration datasets in subdirectories</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id6">
<span id="figdatasetsubdirectories"></span><a class="reference internal image-reference" href="../../../../../_images/DatasetSubdirectory.png"><img alt="../../../../../_images/DatasetSubdirectory.png" src="../../../../../_images/DatasetSubdirectory.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.5.3 </span><span class="caption-text">Subdirectory containing data from one experiment</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="2">
<li><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0028/src/model/matTestAllParamsReadStrain.tcl">matTestAllParamsReadStrain.tcl</a>: This tcl script is designed to read the strain history from a file labeled input_data.txt, conduct a stress-strain simulation, and subsequently generate predicted stress values using the Steel02 model. These predicted stress values are then written into a file named <code class="docutils literal notranslate"><span class="pre">results.out</span></code>.</p></li>
</ol>
<div class="align-center figure" id="id7">
<span id="figmodelfiles"></span><a class="reference internal image-reference" href="../../../../../_images/ModelFiles.png"><img alt="../../../../../_images/ModelFiles.png" src="../../../../../_images/ModelFiles.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.5.4 </span><span class="caption-text">Model files</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="3">
<li><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0028/src/model/restart_file.json">restart_file.json</a>: This JSON file contains an example of the data needed to restart an analysis from a previous result obtained using quoFEM. Restart files from a previous run can be found as explained <a class="reference internal" href="#lblhbmrestart"><span class="std std-ref">later in this example</span></a>.</p></li>
</ol>
</div>
<div class="section" id="uq-workflow">
<h2><span class="section-number">4.15.6. </span>UQ workflow<a class="headerlink" href="#uq-workflow" title="Permalink to this heading">¶</a></h2>
<p>The inputs needed to run this example can be loaded into the quoFEM user interface by selecting the <code class="docutils literal notranslate"><span class="pre">Bayesian</span> <span class="pre">Calibration</span> <span class="pre">of</span> <span class="pre">Hierarchical</span> <span class="pre">Model</span></code> example from the <code class="docutils literal notranslate"><span class="pre">Examples</span></code> menu of quoFEM.</p>
<p>The inputs can also be set up manually through the following steps:</p>
<ol class="arabic simple">
<li><p>Start the application and the <strong>UQ</strong> panel will be highlighted. In the <strong>UQ Method</strong> drop-down menu, select the <strong>Bayesian Calibration</strong> option. In the <strong>UQ Engine</strong> dropdown menu select <strong>UCSD-UQ</strong> option. In the <strong>Model</strong> dropdown, select the <strong>Hierarchical</strong> option. Enter the values in this panel as shown in the figure below. A brief explanation of the different user input fields can be found in the <a class="reference internal" href="../../../usage/desktop/UCSD_UQ_Hierarchical.html#lblucsdhierarchical"><span class="std std-ref">User Manual</span></a>.</p></li>
</ol>
<div class="align-center figure" id="id8">
<span id="fighbmuq"></span><a class="reference internal image-reference" href="../../../../../_images/UQ2.png"><img alt="../../../../../_images/UQ2.png" src="../../../../../_images/UQ2.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.1 </span><span class="caption-text">Inputs in the UQ panel</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="2">
<li><p>Next in the <strong>FEM</strong> panel , select <strong>OpenSees</strong> and populate the <strong>Input Script</strong> field by choosing the path to the model file.</p></li>
</ol>
<div class="align-center figure" id="id9">
<span id="fighbmfem"></span><a class="reference internal image-reference" href="../../../../../_images/FEM3.png"><img alt="../../../../../_images/FEM3.png" src="../../../../../_images/FEM3.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.2 </span><span class="caption-text">Inputs in the FEM panel</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="3">
<li><p>Select the <strong>RV</strong> tab from the input panel. This panel should be pre-populated with the names of the variables that were defined in the model scripts. If not, press the <strong>Add</strong> button to create a new field to define the input random variable. Enter the same variable name, as required in the model script. For this example, choose the Normal probability distribution for all the random variables and enter the parameter values for each distribution as shown in the figures below:</p></li>
</ol>
<div class="align-center figure" id="fighbmrv1">
<a class="reference internal image-reference" href="../../../../../_images/RV11.png"><img alt="../../../../../_images/RV11.png" src="../../../../../_images/RV11.png" style="width: 600px;" /></a>
</div>
<div class="align-center figure" id="id10">
<span id="fighbmrv2"></span><a class="reference internal image-reference" href="../../../../../_images/RV2.png"><img alt="../../../../../_images/RV2.png" src="../../../../../_images/RV2.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.3 </span><span class="caption-text">Inputs in the RV panel</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="4">
<li><p>In the <strong>EDP</strong> panel create the output quantities corresponding to each of the 36 experiments with a descriptive name, as shown in the figures below:</p></li>
</ol>
<div class="align-center figure" id="fighbmedp1">
<a class="reference internal image-reference" href="../../../../../_images/EDP11.png"><img alt="../../../../../_images/EDP11.png" src="../../../../../_images/EDP11.png" style="width: 600px;" /></a>
</div>
<div class="align-center figure" id="id11">
<span id="fighbmedp2"></span><a class="reference internal image-reference" href="../../../../../_images/EDP2.png"><img alt="../../../../../_images/EDP2.png" src="../../../../../_images/EDP2.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.4 </span><span class="caption-text">Inputs in the EDP panel</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="5">
<li><p>Click on the <strong>Run</strong> button. This will create the necessary input files to perform a Bayesian calibration of the hierarchical model, run the analysis, and display the results when the analysis is completed. The results produced are sample values drawn from the distribution that represents the aleatory uncertainty in the estimated material parameters from each of the datasets.</p></li>
</ol>
<p>The <strong>Summary</strong> tab shows the mean, standard deviation, and coefficient of variation of each of the seven parameters of the material model that were inferred in this example.</p>
<div class="align-center figure" id="fighbmres1">
<a class="reference internal image-reference" href="../../../../../_images/RES12.png"><img alt="../../../../../_images/RES12.png" src="../../../../../_images/RES12.png" style="width: 600px;" /></a>
</div>
<div class="align-center figure" id="id12">
<span id="fighbmres2"></span><a class="reference internal image-reference" href="../../../../../_images/RES22.png"><img alt="../../../../../_images/RES22.png" src="../../../../../_images/RES22.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.5 </span><span class="caption-text">Results in the RES panel summary tab</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<p>In the <strong>Data Values</strong> tab of the <strong>RES</strong> panel, a chart and a table with all the sample values are shown. By clicking on the data inside the columns of the chart with the left or right mouse button, different chart types are created and shown in the chart area on the left.</p>
<div class="align-center figure" id="fighbmres3">
<a class="reference internal image-reference" href="../../../../../_images/RES32.png"><img alt="../../../../../_images/RES32.png" src="../../../../../_images/RES32.png" style="width: 600px;" /></a>
</div>
<div class="align-center figure" id="id13">
<span id="fighbmres4"></span><a class="reference internal image-reference" href="../../../../../_images/RES42.png"><img alt="../../../../../_images/RES42.png" src="../../../../../_images/RES42.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.6.6 </span><span class="caption-text">Data values tab in the RES panel</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="files-for-restarting-the-analysis">
<span id="lblhbmrestart"></span><h2><span class="section-number">4.15.7. </span>Files for restarting the analysis<a class="headerlink" href="#files-for-restarting-the-analysis" title="Permalink to this heading">¶</a></h2>
<p>In addition to the results displayed in the RES panel in quoFEM, JSON files with the state of the chain at every step of the sampling algorithm are saved in a directory called <code class="docutils literal notranslate"><span class="pre">sampling_results</span></code> within the <code class="docutils literal notranslate"><span class="pre">tmp.SimCenter</span></code> directory inside the jobs directory specified in the quoFEM Preferences menu. Any of these files can be used to resume the sampling, by copying the file to the directory containing the model files and specifying its name in the Restart File Name field in the UQ panel.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tmp.SimCenter</span></code> directory is cleared every time the <code class="docutils literal notranslate"><span class="pre">RUN</span></code> button is clicked in quoFEM. So, if you want to restart the analysis using one of the sampling results files outlined above, make sure to copy the results file to a location outside the <code class="docutils literal notranslate"><span class="pre">tmp.SimCenter</span></code> directory at the end of the analysis.</p>
</div>
<div class="align-center figure" id="id14">
<span id="fighbmpreferences"></span><a class="reference internal image-reference" href="../../../../../_images/Preferences1.png"><img alt="../../../../../_images/Preferences1.png" src="../../../../../_images/Preferences1.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.7.1 </span><span class="caption-text">Jobs directory in the Preferences panel</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="fighbmres5">
<a class="reference internal image-reference" href="../../../../../_images/RES51.png"><img alt="../../../../../_images/RES51.png" src="../../../../../_images/RES51.png" style="width: 600px;" /></a>
</div>
<div class="align-center figure" id="id15">
<span id="fighbmres6"></span><a class="reference internal image-reference" href="../../../../../_images/RES61.png"><img alt="../../../../../_images/RES61.png" src="../../../../../_images/RES61.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4.15.7.2 </span><span class="caption-text">Sampling results files that can be used to restart the analysis</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<dl class="citation">
<dt class="label" id="carreno2020"><span class="brackets"><a class="fn-backref" href="#id1">Carreño2020</a></span></dt>
<dd><ol class="upperalpha simple" start="18">
<li><p>Carreño, K.H. Lotfizadeh, J.P. Conte, J.I. Restrepo, Material Model Parameters for the Giuffrè-Menegotto-Pinto Uniaxial Steel Stress-Strain Model, <em>J. Struct. Eng.</em> 146 (2020) 04019205. <a class="reference external" href="https://doi.org/10.1061/(ASCE)ST.1943-541X.0002505">https://doi.org/10.1061/(ASCE)ST.1943-541X.0002505</a>.</p></li>
</ol>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2024, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158130480-4', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>