

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5.1. Two-Dimensional Truss: Sampling, Reliability and Sensitivity &mdash; Quantified Uncertainty with Optimization for the FEM  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="5.2. Forward Propagation - OpenSeesPy" href="../qfem-0002/README.html" />
    <link rel="prev" title="5. Examples" href="../examples.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../../index.html">



  
  <img src="../../../../../_static/quoFEM-Logo.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/desktop/ack.html">2. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/cite.html">4. How To Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoCapabilities.html">5. Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoReleaseNotes.html">6. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/quoPlans.html">7. Release Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/glossary.html">8. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../front-matter/abbreviations.html">9. Abbreviations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/desktop/installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/quoFEM/quoFEMtutorial.html">2. Getting Started Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/desktop/usage.html">3. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/desktop/troubleshooting.html">4. Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">5. Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.1. Two-Dimensional Truss: Sampling, Reliability and Sensitivity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sampling-analysis">5.1.1. Sampling Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reliability-analysis">5.1.2. Reliability Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-sensitivity">5.1.3. Global Sensitivity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0002/README.html">5.2. Forward Propagation - OpenSeesPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0005/README.html">5.3. Basic modeling with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0007/README.html">5.4. Steel Frame: Conventional Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0009/README.html">5.5. Two-Dimensional Truss: Global Sensitivity Analysis using SimCenterUQ Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0014/README.html">5.6. Steel Frame: Bayesian Calibration using TMCMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0015/README.html">5.7. Surrogate Modeling for One Story Building Earthquake Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0016/README.html">5.8. Surrogate Modeling to Predict Mean and Variance of Earthquake Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0017/README.html">5.9. Custom UQ for UQpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0019/README.html">5.10. Bayesian Calibration of Material Model Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0022/README.html">5.11. Two-Dimensional Truss: PLoM Modeling and Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0023/README.html">5.12. Global Sensitivity Analysis for Field QoI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0025/README.html">5.13. Heteroscedastic Gaussian Process modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qfem-0027/README.html">5.14. Forward propagation of uncertainty with multiple simulation models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reqments/reqQUOFE.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bugs.html">7. Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dcv/quoFEM/quoFEM.html">8. Running in Your Browser</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../technical_manual/desktop/technical_manual.html">1. Technical Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/architecture/desktop/architecture.html">2. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/how_to_extend/desktop/how_to_extend.html">3. How to Extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/verification/desktop/verification.html">4. Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_manual/coding_style/desktop/coding_style.html">5. Coding Style</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Quantified Uncertainty with Optimization for the FEM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../examples.html"><span class="section-number">5. </span>Examples</a> &raquo;</li>
        
      <li><span class="section-number">5.1. </span>Two-Dimensional Truss: Sampling, Reliability and Sensitivity</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/common/user_manual/examples/desktop/qfem-0001/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="two-dimensional-truss-sampling-reliability-and-sensitivity">
<span id="qfem-0001"></span><h1><span class="section-number">5.1. </span>Two-Dimensional Truss: Sampling, Reliability and Sensitivity<a class="headerlink" href="#two-dimensional-truss-sampling-reliability-and-sensitivity" title="Permalink to this headline">¶</a></h1>
<p>Consider the problem of uncertainty quantification in a two-dimensional truss structure shown in the following figure.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../../../_images/truss.png"><img alt="../../../../../_images/truss.png" src="../../../../../_images/truss.png" style="width: 600px;" /></a>
</div>
<p>The structure has uncertain properties that all follow normal distribution:</p>
<ol class="arabic simple">
<li><p>Elastic modulus(<code class="docutils literal notranslate"><span class="pre">E</span></code>): mean <span class="math notranslate nohighlight">\(\mu_E=205 kN/{mm^2}\)</span> and standard deviation <span class="math notranslate nohighlight">\(\sigma_E =15 kN/{mm^2}\)</span> (COV = 7.3%)</p></li>
<li><p>Load (<code class="docutils literal notranslate"><span class="pre">P</span></code>): mean <span class="math notranslate nohighlight">\(\mu_P =25 kN\)</span> and a standard deviation of <span class="math notranslate nohighlight">\(\sigma_P = 3 kN\)</span>, (COV = 12%).</p></li>
<li><p>Cross sectional area for the upper three bars (<code class="docutils literal notranslate"><span class="pre">Au</span></code>): mean <span class="math notranslate nohighlight">\(\mu_{Au} = 500 mm^2\)</span>, and a standard deviation of <span class="math notranslate nohighlight">\(\sigma_{Au} = 25mm^2\)</span>  (COV = 5%)</p></li>
<li><p>Cross sectional area for the other six bars (<code class="docutils literal notranslate"><span class="pre">Ao</span></code>): mean <span class="math notranslate nohighlight">\(\mu_{Ao} = 250mm^2\)</span>, and <span class="math notranslate nohighlight">\(\sigma_{Ao} = 10mm^2\)</span> (COV = 4%)</p></li>
</ol>
<p>The goal of the exercise is to estimate the mean and standard deviation of the vertical displacement at node 3. The exercise requires two files. The user is required to download these files and place them in a <strong>NEW</strong> folder. The two files are:</p>
<ol class="arabic">
<li><p>Main file: <a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0001/src/TrussModel.tcl">TrussTemplate.tcl</a></p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c"># units kN &amp; mm</span>

<span class="c">#</span>
<span class="c"># set some parameters</span>
<span class="c">#</span>

<span class="nv">pset</span><span class="w"> </span>E<span class="w"> </span><span class="mi">205</span>
<span class="nv">pset</span><span class="w"> </span>P<span class="w"> </span><span class="mi">25</span>
<span class="nv">pset</span><span class="w"> </span>Au<span class="w"> </span><span class="mi">500</span>
<span class="nv">pset</span><span class="w"> </span>Ao<span class="w"> </span><span class="mi">250</span>

<span class="c">#</span>
<span class="c"># build the model</span>
<span class="c">#</span>

<span class="nv">model</span><span class="w"> </span>Basic<span class="w"> </span><span class="o">-</span>ndm<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span>ndf<span class="w"> </span><span class="mi">2</span>

<span class="nv">node</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="mi">0</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="mi">4000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">8000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">12000</span><span class="w">    </span><span class="mi">0</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="mi">4000</span><span class="w"> </span><span class="mi">4000</span>
<span class="nv">node</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="mi">8000</span><span class="w"> </span><span class="mi">4000</span>

<span class="nv">fix</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">fix</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span>

<span class="nv">uniaxialMaterial</span><span class="w"> </span>Elastic<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">$E</span>

<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nv">$Au</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">element</span><span class="w"> </span>truss<span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">$Ao</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">timeSeries</span><span class="w"> </span>Linear<span class="w"> </span><span class="mi">1</span>
<span class="nv">pattern</span><span class="w"> </span>Plain<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nb">load</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="o">-</span><span class="nv">$P</span><span class="k">]</span>
<span class="w">    </span><span class="nb">load</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="o">-</span><span class="nv">$P</span><span class="k">]</span>
<span class="k">}</span>

<span class="c">#</span>
<span class="c"># create a recorder</span>
<span class="c">#</span>

<span class="nv">recorder</span><span class="w"> </span>Node<span class="w"> </span><span class="o">-</span>file<span class="w"> </span>node.out<span class="w"> </span><span class="o">-</span>scientific<span class="w"> </span><span class="o">-</span>precision<span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">-</span>node<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">-</span>dof<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span>disp

<span class="c">#</span>
<span class="c"># build and perform the analysis</span>
<span class="c">#</span>

<span class="nv">algorithm</span><span class="w"> </span>Linear
<span class="nv">integrator</span><span class="w"> </span>LoadControl<span class="w"> </span><span class="mf">1.0</span>
<span class="nv">system</span><span class="w"> </span>ProfileSPD
<span class="nv">numberer</span><span class="w"> </span>RCM
<span class="nv">constraints</span><span class="w"> </span>Plain
<span class="nv">analysis</span><span class="w"> </span>Static
<span class="nv">analyze</span><span class="w"> </span><span class="mi">1</span>

<span class="c">#</span>
<span class="c"># remove the recorders</span>
<span class="c">#</span>

<span class="nv">remove</span><span class="w"> </span>recorders
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first lines containing <code class="docutils literal notranslate"><span class="pre">pset</span></code> will be read by the application when the file is selected and the application will autopopulate the Random Variables input panel with these same variable names. It is of course possible to explicitly use Random Variables without the <code class="docutils literal notranslate"><span class="pre">pset</span></code> command as is demonstrated in the verification section.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">TrussPost.tcl</span></code> script shown below will accept as input any of the 6 nodes in the domain and for each of the two dof directions.</p>
<ol class="arabic" start="2">
<li><p>Postprocessing file: <a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0001/../qfem-0001/src/TrussPost.tcl">TrussPost.tcl</a>.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c"># create file handler to write results to output &amp; list into which we will put results</span>
<span class="k">set</span><span class="w"> </span>resultFile<span class="w"> </span><span class="k">[</span><span class="nb">open</span><span class="w"> </span>results.out<span class="w"> </span>w<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>results<span class="w"> </span><span class="k">[]</span>

<span class="c"># get list of valid nodeTags</span>
<span class="k">set</span><span class="w"> </span>nodeTags<span class="w"> </span><span class="k">[</span><span class="nv">getNodeTags</span><span class="k">]</span>

<span class="c"># for each quanity in list of QoI passed</span>
<span class="c">#  - get nodeTag</span>
<span class="c">#  - get nodal displacement if valid node, output 0.0 if not</span>
<span class="c">#  - for valid node output displacement, note if dof not provided output 1&#39;st dof</span>

<span class="k">foreach</span><span class="w"> </span>edp<span class="w"> </span><span class="nv">$listQoI</span><span class="w"> </span><span class="k">{</span>
<span class="w">	</span><span class="k">set</span><span class="w"> </span>splitEDP<span class="w"> </span><span class="k">[</span><span class="nb">split</span><span class="w"> </span><span class="nv">$edp</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="k">]</span><span class="w">	</span>
<span class="w">	</span>set<span class="w"> </span>nodeTag<span class="w"> </span><span class="k">[</span><span class="nb">lindex</span><span class="w"> </span><span class="nv">$splitEDP</span><span class="w"> </span><span class="mi">1</span><span class="k">]</span>
<span class="w">	</span><span class="k">if</span><span class="w"> </span><span class="k">{</span><span class="nv">$nodeTag</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">$nodeTags</span><span class="k">}</span><span class="w"> </span><span class="k">{</span>
<span class="w">	    </span><span class="k">set</span><span class="w"> </span>nodeDisp<span class="w"> </span><span class="k">[</span><span class="nv">nodeDisp</span><span class="w"> </span><span class="nv">$nodeTag</span><span class="k">]</span>
<span class="w">	    </span><span class="k">if</span><span class="w"> </span><span class="k">{[</span><span class="nb">llength</span><span class="w"> </span><span class="nv">$splitEDP</span><span class="k">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">3</span><span class="k">}</span><span class="w"> </span><span class="k">{</span>
<span class="w">		</span><span class="k">set</span><span class="w"> </span>result<span class="w"> </span><span class="k">[expr</span><span class="w"> </span>abs<span class="k">([</span><span class="nb">lindex</span><span class="w"> </span><span class="nv">$nodeDisp</span><span class="w"> </span><span class="mi">0</span><span class="k">])]</span>
<span class="w">	    </span><span class="k">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">{</span>
<span class="w">		</span><span class="k">set</span><span class="w"> </span>result<span class="w"> </span><span class="k">[expr</span><span class="w"> </span>abs<span class="k">([</span><span class="nb">lindex</span><span class="w"> </span><span class="nv">$nodeDisp</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="k">[</span><span class="nb">lindex</span><span class="w"> </span><span class="nv">$splitEDP</span><span class="w"> </span><span class="mi">3</span><span class="k">]</span><span class="o">-</span><span class="mi">1</span><span class="k">]])]</span>
<span class="w">	    </span><span class="k">}</span>
<span class="w">	</span><span class="k">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">{</span>
<span class="w">	    </span><span class="k">set</span><span class="w"> </span>result<span class="w"> </span><span class="mi">0</span>.
<span class="w">	</span><span class="k">}</span>
<span class="w">	</span><span class="nb">lappend</span><span class="w"> </span>results<span class="w"> </span><span class="nv">$result</span>
<span class="k">}</span>

<span class="c"># send results to output file &amp; close the file</span>
<span class="nb">puts</span><span class="w"> </span><span class="nv">$resultFile</span><span class="w"> </span><span class="nv">$results</span>
<span class="nb">close</span><span class="w"> </span><span class="nv">$resultFile</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use has the option to provide no post-process script (in which case the main script must create a <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file containing a single line with as many space separated numbers as QoI or the user may provide a Python script that also performs the postprocessing. Below is an example of a postprocessing Python script.</p>
<p>Alternative postprocessing file: <a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples//qfem-0001/src/TrussPost.py">TrussPost.py</a></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>

<span class="c1"># written: fmk, adamzs 01/18</span>

<span class="c1"># import functions for Python 2.X support</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">):</span> 
    <span class="nb">range</span><span class="o">=</span><span class="n">xrange</span>
    <span class="n">string_types</span> <span class="o">=</span> <span class="n">basestring</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">string_types</span> <span class="o">=</span> <span class="nb">str</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">process_results</span><span class="p">(</span><span class="n">inputArgs</span><span class="p">):</span>

    <span class="c1">#</span>
    <span class="c1"># process output file &quot;node.out&quot; for nodal displacements</span>
    <span class="c1">#</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s1">&#39;node.out&#39;</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inFile</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">displ</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">numNode</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">displ</span><span class="p">)</span>

    <span class="n">inFile</span><span class="o">.</span><span class="n">close</span>

    <span class="c1"># now process the input args and write the results file</span>

    <span class="n">outFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;results.out&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

    <span class="c1"># note for now assuming no ERROR in user data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inputArgs</span><span class="p">:</span>

        <span class="n">theList</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">theList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
            <span class="n">dof</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">theList</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dof</span> <span class="o">=</span> <span class="mi">1</span>
                      
        <span class="k">if</span> <span class="p">(</span><span class="n">theList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Node&quot;</span><span class="p">):</span>
            <span class="n">nodeTag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">theList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">nodeTag</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">nodeTag</span> <span class="o">&lt;=</span> <span class="n">numNode</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">theList</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Disp&quot;</span><span class="p">):</span>
                    <span class="n">nodeDisp</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">displ</span><span class="p">[((</span><span class="n">nodeTag</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">dof</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nodeDisp</span><span class="p">))</span>
                    <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0. &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0. &#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0. &#39;</span><span class="p">)</span>

    <span class="n">outFile</span><span class="o">.</span><span class="n">close</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="n">process_results</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not place the files in your root, downloads, or desktop folder as when the application runs it will copy the contents on the directories and subdirectories containing these files multiple times. If you are like us, your root, Downloads or Documents folders contains and awful lot of files and when the backend workflow runs you will slowly find you will run out of disk space!</p>
</div>
<div class="section" id="sampling-analysis">
<h2><span class="section-number">5.1.1. </span>Sampling Analysis<a class="headerlink" href="#sampling-analysis" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Problem files</p></td>
<td><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples/qfem-0001">Download</a></p></td>
</tr>
</tbody>
</table>
<p>To perform a sampling or forward propagation uncertainty analysis the user would perform the following steps:</p>
<ol class="arabic simple">
<li><p>Start the application and the UQ Selection will be highlighted. In the panel for the UQ selection, keep the UQ engine as that selected, i.e. Dakota, and the <strong>UQ Method Category</strong> as Forward Propagation, and the Forward Propagation method as LHS (Latin Hypercube). Change the <strong>#samples</strong> to 1000 and the <strong>seed</strong> to 20 as shown in the figure.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../_images/trussUQ.png" src="../../../../../_images/trussUQ.png" />
</div>
<ul class="simple">
<li><p>Sample size is related to the confidence interval of the estimates. Please refer to <a class="reference internal" href="../../../usage/desktop/DakotaSampling.html#lbldakotaforward"><span class="std std-ref">here</span></a>.</p></li>
<li><p>Random seed is used to ensure that results are reproducible.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Next select the <strong>FEM</strong> panel from the input panel. This will default in the OpenSees FEM engine. For the main script copy the path name to <code class="docutils literal notranslate"><span class="pre">TrussModel.tcl</span></code> or select <strong>choose</strong> and navigate to the file. For the <strong>post-process script</strong> field, repeat the same procedure for the <code class="docutils literal notranslate"><span class="pre">TrussPost.tcl</span></code> script.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../_images/trussFEM.png" src="../../../../../_images/trussFEM.png" />
</div>
<ol class="arabic simple" start="3">
<li><p>Next select the <strong>RV</strong> panel from the input panel. This should be pre-populated with four random variables with same names as those having <code class="docutils literal notranslate"><span class="pre">pset</span></code> in the tcl script. For each variable, from the drop down menu change them from having a constant distribution to a normal one and then provide the means and standard deviations specified for the problem.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../_images/trussRV.png" src="../../../../../_images/trussRV.png" />
</div>
<ol class="arabic simple" start="4">
<li><p>Next select the <strong>QoI</strong> tab. Here enter <code class="docutils literal notranslate"><span class="pre">Node_3_Disp_2</span></code> for the one variable.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../_images/trussQoI.png" src="../../../../../_images/trussQoI.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The user can add additional QoI by selecting add and then providing additional names. As seen from the post-process script any of the 6 nodes may be specified and for any node either the 1 or 2 DOF direction.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>Next click on the <strong>Run</strong> button. This will cause the backend application to launch dakota. When done the <strong>RES</strong> panel will be selected and the results will be displayed. The results show the values the mean and standard deviation.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../_images/trussRES1.png" src="../../../../../_images/trussRES1.png" />
</div>
<p>If the user selects the <strong>Data</strong> tab in the results panel, they will be presented with both a graphical plot and a tabular listing of the data.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussRES2.png" src="../../../../../_images/trussRES2.png" />
</div>
<p>Various views of the graphical display can be obtained by left and right clicking in the columns of the tabular data. If a singular column of the tabular data is pressed with both right and left buttons a frequency and CDF will be displayed, as shown in figure below.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussRES5.png" src="../../../../../_images/trussRES5.png" />
</div>
</div>
<div class="section" id="reliability-analysis">
<h2><span class="section-number">5.1.2. </span>Reliability Analysis<a class="headerlink" href="#reliability-analysis" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Problem files</p></td>
<td><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples/qfem-0003/">Download</a></p></td>
</tr>
</tbody>
</table>
<p>If one is interested in the probability that a particular response measure will be exceeded, an alternate strategy is to perform a reliability analysis. In order to perform a reliability analysis the steps above would be repeated with the exception that the user would select a reliability analysis method instead of a Forward Propagation method. To obtain reliability results using the Second-Order Reliability Method (SORM) for the truss problem the user would follow the same sequence of steps as previously. The difference would be in the <strong>UQ</strong> panel in which the user would select a Reliability as the Dakota Method Category and then choose Local reliability. In the figure the user is specifying that they are interested in the probability that the displacement will exceed certain response levels.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussSORM-UQ.png" src="../../../../../_images/trussSORM-UQ.png" />
</div>
<p>After the user fills in the rest of the tabs as per the previous section, the user would then press the <strong>RUN</strong> button. The application (after spinning for a while with the wheel of death) will present the user with the results.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussSORM-RES.png" src="../../../../../_images/trussSORM-RES.png" />
</div>
</div>
<div class="section" id="global-sensitivity">
<h2><span class="section-number">5.1.3. </span>Global Sensitivity<a class="headerlink" href="#global-sensitivity" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Problem files</p></td>
<td><p><a class="reference external" href="https://github.com/NHERI-SimCenter/quoFEM/tree/master/Examples/qfem-0004/">Download</a></p></td>
</tr>
</tbody>
</table>
<p>In a global sensitivity analysis the user is wishing to understand what is the influence of the individual random variables on the quantities of interest. This is typically done before the user launches large scale forward uncertainty problems in order to limit the number of random variables used so as to limit the number of simulations performed.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussSens-UQ.png" src="../../../../../_images/trussSens-UQ.png" />
</div>
<p>After the user fills in the rest of the tabs as per the previous section, the user would then press the <strong>RUN</strong> button. The application (after spinning for a while with the wheel of death) will present the user with the results.</p>
<div class="align-center figure">
<img alt="../../../../../_images/trussSensitivity-RES.png" src="../../../../../_images/trussSensitivity-RES.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2023, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158130480-4', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>